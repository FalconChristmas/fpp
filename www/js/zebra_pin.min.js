/**
 *  Zebra_Pin
 *  @author     Stefan Gabos <contact@stefangabos.ro>
 *  @copyright  (c) 2013 - 2018 Stefan Gabos
 *  @license    http://www.gnu.org/licenses/lgpl-3.0.txt GNU LESSER GENERAL PUBLIC LICENSE
 *  @package    https://github.com/adamcoulombe/Zebra_Pin
 */
!function(h){"use strict";h.Zebra_Pin=function(t,s){this.version="2.0.0";var n=null,e={class_name:"Zebra_Pin",contain:!1,hard:!1,top_spacing:0,pinpoint_offset:0,bottom_spacing:0,z_index:1e3,onPin:null,onUnpin:null},p=this,g=(Math.random()+1).toString(36).substring(2,7),f=h(window);p.update=function(){t.each(function(s){var n=h(this);h(this).hasClass(p.settings.class_name)&&(n.attr("style",n.data("ztt_previous_style")||"").removeClass(p.settings.class_name).removeClass("Zebra_Pin_Contained"),n.next(".Zebra_Pin_Clone").remove());var t,e,i,a,o=n.offset(),r=n.position(),l=n.outerHeight(),d=n.outerWidth(),c=parseInt(n.css("marginLeft"),10)||0,_=parseInt(n.css("marginTop"),10)||0;o.left-=c,o.top-=_,p.settings.contain&&(t=n.parent(),e=t.height(),i=t.offset()),p.settings.hard?n.css({position:"fixed",left:o.left,top:o.top,width:d,zIndex:p.settings.z_index}).addClass(p.settings.class_name):(a=".Zebra_Pin_"+g+"_"+s,f.off("scroll"+a).on("scroll"+a,function(){var t=f.scrollTop();t>=o.top-p.settings.top_spacing+p.settings.pinpoint_offset&&(!p.settings.contain||t<=i.top+e-p.settings.top_spacing-l-p.settings.bottom_spacing)&&(!n.hasClass(p.settings.class_name)||n.hasClass("Zebra_Pin_Contained"))?(n.hasClass("Zebra_Pin_Contained")?n.removeClass("Zebra_Pin_Contained"):(n.clone().addClass("Zebra_Pin_Clone").insertAfter(n).css("visibility","hidden").attr("id",n.attr("id")+"_Zebra_Clone").find("[id]").each(function(){h(this).attr("id",h(this).attr("id")+"_Zebra_Clone")}),n.data("ztt_previous_style",n.attr("style")).addClass(p.settings.class_name),p.settings.onPin&&"function"==typeof p.settings.onPin&&p.settings.onPin(o.top-p.settings.top_spacing,n,s)),n.css({position:"fixed",left:o.left,top:p.settings.top_spacing,width:d,zIndex:p.settings.z_index})):t<o.top-p.settings.top_spacing&&n.hasClass(p.settings.class_name)?(n.next(".Zebra_Pin_Clone").remove(),n.attr("style",n.data("ztt_previous_style")||"").removeClass(p.settings.class_name),p.settings.onUnpin&&"function"==typeof p.settings.onUnpin&&p.settings.onUnpin(o.top-p.settings.top_spacing,n,s)):p.settings.contain&&t>=i.top+e-p.settings.top_spacing-l-p.settings.bottom_spacing&&!n.hasClass("Zebra_Pin_Contained")&&(n.hasClass(p.settings.class_name)||(n.clone().addClass("Zebra_Pin_Clone").insertAfter(n).css("visibility","hidden").attr("id",n.attr("id")+"_Zebra_Clone").find("[id]").each(function(){h(this).attr("id",h(this).attr("id")+"_Zebra_Clone")}),n.data("ztt_previous_style",n.attr("style")).addClass(p.settings.class_name),p.settings.onPin&&"function"==typeof p.settings.onPin&&p.settings.onPin(o.top-p.settings.top_spacing,n,s)),n.css({position:"absolute",left:r.left,top:e-l-p.settings.bottom_spacing-p.settings.bottom_spacing}).addClass("Zebra_Pin_Contained"))}),f.trigger("scroll"+a))})},p.settings={},function(){if(p.settings=h.extend({},e,s),p.update(),f.on("resize",function(){clearTimeout(n),n=setTimeout(function(){p.update()},50)}),!document.getElementById("hacky-scrollbar-resize-listener")){var t=document.createElement("iframe");t.id="hacky-scrollbar-resize-listener",t.style.cssText="height: 0; opacity:0; background-color: transparent; margin: 0; padding: 0; overflow: hidden; border-width: 0; position: absolute; width: 100%;",t.onload=function(){t.contentWindow.addEventListener("resize",function(){try{var t=document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}catch(t){}})},document.body.appendChild(t)}}()}}(jQuery);